<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="estilos/estilo.css">
    <link rel="shotcut icon" href="imgs/favicon.png">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <title>Redefinição de Senha</title>
</head>

<body class="fundo">
    <div class="tudo">
        <img src="imgs/logo.png">
        <div class="formLogin" style="height:200px;">
                <form id="redefinir" onsubmit="return senhaesqueceu()">
                <p>Email</p>
                <input type="email" id="email" name="email" placeholder="Email" required>
                <div id=botoes> 
                    <button type="button" class="botao" onclick="valida()">Redefinir Senha</button>
                    <a class="botao" href="login.html">Sair</a>
                </div>
                 </form>
            
        </div>
    </div>
</body>
</html>
<script>
    function valida() {
      if (email.value == ''){
        swal({
            icon :"error",
            title:`Por Favor, Insira Seu Email!`
        });
      }
      
      else{
        senhaesqueceu()
      } 
    }

    function senhaesqueceu(){
        var formulario = new URLSearchParams(new FormData(redefinir));
        fetch("/email/enviar_email", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            
            if (response.ok) {
                swal({
            title:`Enviamos um Email de Redefinição de Senha para esse Endereço`
        });
            } else {

                console.log('Erro de login!');
                swal({
            icon :"error",
            title:`Por Favor, Insira Seu Email!`
        });

            }
        });

        return false;
    }

</script>